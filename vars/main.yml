---
# Server
provision: none  # or 'aws', 'gcp', 'azure', 'digitalocean', 'hetzner' to create a virtual machine for DBLab Engine

# System
username: "root"  # system user, owner of configuration files

# ZFS pool
zpool_disk: ""  # specify an empty disk for the ZFS pool (e.g.: /dev/sdb). If not specified, an attempt will be made to automatically detect an empty volume.
zpool_name: "dblab_pool"
zpool_mount_dir: "/var/lib/dblab"
zpool_datasets_number: 2  # number of datasets for the ZFS pool. When the DBLab Engine is deployed, you can increase the number of datasets (if necessary).
zpool_datasets_name: "dataset"  # base name for ZFS datasets. Suffixes (01, 02, etc.) are appended based on `zpool_datasets_number`.

# DBLab Engine
dblab_engine_verification_token: "some-secret-token"
dblab_engine_base_path: "/root/.dblab"
dblab_engine_config_path: "{{ dblab_engine_base_path }}/engine/configs"
dblab_engine_meta_path: "{{ dblab_engine_base_path }}/engine/meta"
dblab_engine_logs_path: "{{ dblab_engine_base_path }}/engine/logs"
dblab_engine_dump_location: "{{ zpool_mount_dir }}/{{ zpool_name }}/{{ zpool_datasets_name }}_1/dump"  # Use a dataset directory for dumping data
dblab_engine_container_host: 127.0.0.1
dblab_engine_container_name: dblab_server
dblab_engine_port: 2345
dblab_engine_version: 3.4.0
dblab_engine_image: "postgresai/dblab-server:{{ dblab_engine_version | replace('v', '') }}"
dblab_engine_ui_version: "{{ dblab_engine_version | replace('v', '') }}"
dblab_engine_ui_image: "postgresai/ce-ui:{{ dblab_engine_ui_version }}"
dblab_engine_ui_port: 2346
dblab_engine_clone_port_pool:
  from: 6000
  to: 6100
dblab_engine_clone_access_addresses: "127.0.0.1"  # IP addresses that can be used to access clones.
dblab_engine_computing_infrastructure: "{{ provision }}"

# Platform
platform_project_name: ""  # Project name
platform_org_key: ""  # Organization key

# CLI
cli_install: true
cli_version: "{{ dblab_engine_version | replace('v', '') }}"
cli_environment_id: "{{ platform_project_name }}"

# Monitoring

# Netdata - https://github.com/netdata/netdata
netdata_install: true
netdata_version: 1.40.1
netdata_image: "postgresai/netdata-for-dle:v{{ netdata_version | replace('v', '') }}"
netdata_port: 19999

# Proxy
proxy_install: false # Set "true" to install Envoy proxy and issue Let's Encrypt certificate
proxy_dblab_engine_public_port: 443
certbot_install_method: pip
certbot_install_version: 2.6.0
certbot_create_if_missing: true
certbot_create_method: standalone
certbot_auto_renew: true
certbot_auto_renew_user: "{{ username | default(lookup('env', 'USER')) }}"
certbot_auto_renew_hour: "3"
certbot_auto_renew_minute: "30"
certbot_admin_email: "" # Email to issue certificate, for example, admin@example.com
certbot_domain: "" # Domain to issue certificate, for example, example.com
certbot_certs:
  - email: "{{ certbot_admin_email }}"
    domains:
      - "{{ certbot_domain }}"
...
